<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mini jeu Pac-Man</title>
<style>
  #game-container {
    font-family: monospace;
    white-space: pre;
    font-size: 24px;
  }
  .button {
    margin: 5px;
    padding: 10px;
  }
</style>
</head>
<body>

<div id="game-container"></div>

<button class="button" onclick="move('left')">Déplacer à gauche</button>
<button class="button" onclick="move('right')">Déplacer à droite</button>
<button class="button" onclick="resetGame()">Réinitialiser le jeu</button>


<script>

let game = createGame(10); 
updateGameDisplay(game);

function move(direction) {
  if (direction === 'left') {
    game = moveLeft(game);
  } else if (direction === 'right') {
    game = moveRight(game);
  }
  updateGameDisplay(game);
}

function updateGameDisplay(game) {
  const gameContainer = document.getElementById('game-container');
  gameContainer.textContent = game.join(' ');
}

function moveLeft(game) {
    let pacmanIndex = game.indexOf("C");
    if (pacmanIndex > 0) {
		if(game[pacmanIndex - 1] == "^"){
			window.prompt("you lose!")
			let newGame = createGame(game.length)
			return newGame
      }
        game[pacmanIndex] = " ";
        game[pacmanIndex - 1] = "C";
    }
    else{
		if(game[game.length] == "^"){
			window.prompt("you lose!")
			let newGame = createGame(game.length)
			return newGame
		}
        game[0] = " "
        game[game.length-1] = "C"

    }
    return game;
}

function moveRight(game) {
    let pacmanIndex = game.indexOf("C");
    if (pacmanIndex < game.length - 1) {
      	if(game[pacmanIndex + 1] == "^"){
			window.prompt("you lose!")
			let newGame = createGame(game.length)
			return newGame
      }
        game[pacmanIndex] = " ";
        game[pacmanIndex + 1] = "C";
    }
    else{
		if(game[0] == "^"){
			window.prompt("you lose!")
			let newGame = createGame(game.length)
			return newGame
		}
        game[game.length - 1] = " "
        game[0]= "C"
    }
    return game;
}

function createGame(n){
    let game = new Array(n).fill(".");
    game[Math.round(n/2)-1] = "C";
    game[Math.round(n*3/4)-1] = "@";
    game[n-2] = "^";
    return game;
}
function resetGame() {
    game = createGame(10); 
    updateGameDisplay(game); 
}

</script>

</body>
</html>
